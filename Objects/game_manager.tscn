[gd_scene format=3 uid="uid://bm7lfkl4twmhl"]

[ext_resource type="Script" uid="uid://daub10c41cmtp" path="res://Scripts/GameManager.cs" id="1_yrffa"]
[ext_resource type="PackedScene" uid="uid://cu6t7vl41813v" path="res://Objects/audio_stream_player_2d.tscn" id="2_xbpjh"]
[ext_resource type="PackedScene" uid="uid://be8n1bv2r6gwk" path="res://Scenes/MainArea2D.tscn" id="2_xn3ak"]
[ext_resource type="PackedScene" uid="uid://ce5nt6vldt8wy" path="res://UI/MainUI.tscn" id="3_nbjgj"]
[ext_resource type="Script" uid="uid://rhpv4ftojrvo" path="res://Scripts/ChangeVolume.cs" id="4_4y2xu"]
[ext_resource type="PackedScene" uid="uid://dyvgtu05l0rbk" path="res://UI/main_title.tscn" id="4_7e5x8"]
[ext_resource type="AudioStream" uid="uid://ntm68dd7g7n3" path="res://Audio/MUSIQUE MENU PRINCIPAL_Loop.wav" id="4_78jcc"]
[ext_resource type="PackedScene" uid="uid://dqxd8eqky8gj4" path="res://UI/LoadingScreen.tscn" id="6_xn3ak"]
[ext_resource type="Texture2D" uid="uid://bwfyypfmlsdg8" path="res://Sprites/Mask/S_BottomMask_004.png" id="7_wf055"]
[ext_resource type="Script" uid="uid://btt2xmyui1k8w" path="res://Scripts/SettingManager.cs" id="8_5i6f4"]
[ext_resource type="Script" uid="uid://jcxkddk3g0cp" path="res://Scripts/SettingElement.cs" id="8_twmhu"]
[ext_resource type="PackedScene" uid="uid://5d3oylrkmod6" path="res://Objects/ObstacleSpawnpoint.tscn" id="11_jxbvp"]
[ext_resource type="Script" uid="uid://cbqba8l512nnu" path="res://Scripts/ObstacleManager.cs" id="11_venit"]
[ext_resource type="Script" uid="uid://j5ubdqvshkqt" path="res://Scripts/SpawnPoint.cs" id="12_venit"]
[ext_resource type="PackedScene" uid="uid://cepi6ct5rbue5" path="res://Objects/Barrel_002.tscn" id="13_t6dwj"]
[ext_resource type="PackedScene" uid="uid://bpbyqa2wwguv" path="res://Objects/Charette.tscn" id="14_a80t7"]
[ext_resource type="PackedScene" uid="uid://bbai0b1lwabkt" path="res://Objects/Well_001.tscn" id="15_3plak"]
[ext_resource type="PackedScene" uid="uid://qh0wpgd538fm" path="res://Objects/Chval_001.tscn" id="16_0cp7i"]
[ext_resource type="PackedScene" uid="uid://2se2v6jfe33w" path="res://Objects/Straw_001.tscn" id="17_0el21"]
[ext_resource type="PackedScene" uid="uid://csbh3twk2ycu1" path="res://Objects/Barrel_001.tscn" id="18_wksxn"]

[node name="GameManager" type="Node" unique_id=529569245 node_paths=PackedStringArray("_settings", "_spawnPoints", "_animPlayer", "_mainMenu")]
script = ExtResource("1_yrffa")
_settings = NodePath("Settings")
_mainScene = ExtResource("2_xn3ak")
_spawnPoints = [null, null, null, null]
_animPlayer = NodePath("LoadingScreen/AnimationPlayer")
_mainMenu = NodePath("MainTitile")

[node name="AudioStreamPlayer2D" parent="." unique_id=1986237446 instance=ExtResource("2_xbpjh")]
_menuMusic = ExtResource("4_78jcc")

[node name="ChangeVolume" type="Node" parent="AudioStreamPlayer2D" unique_id=2004407886]
script = ExtResource("4_4y2xu")
metadata/_custom_type_script = "uid://rhpv4ftojrvo"

[node name="GameOverTImer" type="Timer" parent="." unique_id=593834194]
wait_time = 3.0
one_shot = true

[node name="UI" type="CanvasLayer" parent="." unique_id=369300904]

[node name="MainUi" parent="UI" unique_id=2139807447 instance=ExtResource("3_nbjgj")]

[node name="MainTitile" type="CanvasLayer" parent="." unique_id=2057667938]

[node name="MainTitle" parent="MainTitile" unique_id=653868411 instance=ExtResource("4_7e5x8")]

[node name="SFlute001" parent="MainTitile/MainTitle/Node2D" parent_id_path=PackedInt32Array(653868411, 1532343156) index="2" unique_id=66608462]
scale = Vector2(1, 0.42500004)

[node name="SFlute002" parent="MainTitile/MainTitle/Node2D" parent_id_path=PackedInt32Array(653868411, 1532343156) index="3" unique_id=1115391830]
scale = Vector2(0.9, 0.42500004)

[node name="SButt002" parent="MainTitile/MainTitle/Node2D" parent_id_path=PackedInt32Array(653868411, 1532343156) index="5" unique_id=817444424]
position = Vector2(31.490004, 30.52)
scale = Vector2(0.42500004, 0.8646956)

[node name="SBottomMask001" parent="MainTitile/MainTitle/Node2D" parent_id_path=PackedInt32Array(653868411, 1532343156) index="8" unique_id=1384629082]
texture = ExtResource("7_wf055")

[node name="UpBigTower_001" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="0" unique_id=1673683336]
collision_layer = 0
collision_mask = 0

[node name="UpBigTower_002" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="1" unique_id=756643541]
collision_layer = 0
collision_mask = 0

[node name="UpSmallTower_001" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="2" unique_id=2135412818]
collision_layer = 0
collision_mask = 0

[node name="UpSmallTower_002" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="3" unique_id=1972708958]
collision_layer = 0
collision_mask = 0

[node name="UpWall_001" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="4" unique_id=856457281]
collision_layer = 0
collision_mask = 0

[node name="UpWall_006" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="5" unique_id=286618571]
collision_layer = 0
collision_mask = 0

[node name="UpWall_002" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="6" unique_id=1239551916]
collision_layer = 0
collision_mask = 0

[node name="UpWall_003" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="7" unique_id=1534510236]
collision_layer = 0
collision_mask = 0

[node name="UpWall_004" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="8" unique_id=1761161436]
collision_layer = 0
collision_mask = 0

[node name="UpWall_005" parent="MainTitile/MainTitle/UpWalls" parent_id_path=PackedInt32Array(653868411, 1694627939) index="9" unique_id=178945425]
collision_layer = 0
collision_mask = 0

[node name="LoadingScreen" parent="." unique_id=631532692 instance=ExtResource("6_xn3ak")]

[node name="Settings" type="Node" parent="." unique_id=814798121 node_paths=PackedStringArray("_settingsElements")]
script = ExtResource("8_5i6f4")
_settingsElements = []

[node name="Obstacles" type="Node" parent="Settings" unique_id=167731060 node_paths=PackedStringArray("_uiFeedback")]
script = ExtResource("8_twmhu")
_uiFeedback = NodePath("../../MainTitile/MainTitle/SGeurageLong/VBoxContainer/UIElementNumber")

[node name="Points" type="Node" parent="Settings" unique_id=953204858 node_paths=PackedStringArray("_uiFeedback")]
script = ExtResource("8_twmhu")
_minValue = 1
_maxValue = 10
_defaultValue = 3
_uiFeedback = NodePath("../../MainTitile/MainTitle/SGeurageLong/VBoxContainer/UIElementNumber3")

[node name="Volume" type="Node" parent="Settings" unique_id=1066484815 node_paths=PackedStringArray("_uiFeedback")]
script = ExtResource("8_twmhu")
_defaultValue = 4
_uiFeedback = NodePath("../../MainTitile/MainTitle/SGeurageLong/VBoxContainer/UIElementNumber2")

[node name="Joueurs" type="Node" parent="Settings" unique_id=992232364 node_paths=PackedStringArray("_uiFeedback")]
script = ExtResource("8_twmhu")
_minValue = 2
_defaultValue = 2
_uiFeedback = NodePath("../../MainTitile/MainTitle/SGeurageLong/VBoxContainer/UIElementNumber4")

[node name="ObstaclesManager" type="Node" parent="." unique_id=1816549978]
script = ExtResource("11_venit")
_obstacles = Array[PackedScene]([ExtResource("13_t6dwj"), ExtResource("14_a80t7"), ExtResource("15_3plak"), ExtResource("16_0cp7i"), ExtResource("17_0el21"), ExtResource("18_wksxn")])

[node name="ObstaclesSP" type="Node2D" parent="ObstaclesManager" unique_id=1905647654]
visible = false

[node name="ObjectSpawnpoint3" parent="ObstaclesManager/ObstaclesSP" unique_id=159317328 instance=ExtResource("11_jxbvp")]
position = Vector2(-1408, 384)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint6" parent="ObstaclesManager/ObstaclesSP" unique_id=2104589128 instance=ExtResource("11_jxbvp")]
position = Vector2(-1152, 128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint9" parent="ObstaclesManager/ObstaclesSP" unique_id=2016483606 instance=ExtResource("11_jxbvp")]
position = Vector2(-896, -128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint11" parent="ObstaclesManager/ObstaclesSP" unique_id=446763820 instance=ExtResource("11_jxbvp")]
position = Vector2(-896, 384)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint14" parent="ObstaclesManager/ObstaclesSP" unique_id=518428068 instance=ExtResource("11_jxbvp")]
position = Vector2(-640, 128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint16" parent="ObstaclesManager/ObstaclesSP" unique_id=507125735 instance=ExtResource("11_jxbvp")]
position = Vector2(-640, 640)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint17" parent="ObstaclesManager/ObstaclesSP" unique_id=378510209 instance=ExtResource("11_jxbvp")]
position = Vector2(-384, -128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint19" parent="ObstaclesManager/ObstaclesSP" unique_id=1336845817 instance=ExtResource("11_jxbvp")]
position = Vector2(-384, 384)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint22" parent="ObstaclesManager/ObstaclesSP" unique_id=1959600784 instance=ExtResource("11_jxbvp")]
position = Vector2(-128, 128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint24" parent="ObstaclesManager/ObstaclesSP" unique_id=2043728472 instance=ExtResource("11_jxbvp")]
position = Vector2(-128, 640)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint25" parent="ObstaclesManager/ObstaclesSP" unique_id=405979004 instance=ExtResource("11_jxbvp")]
position = Vector2(128, -128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint27" parent="ObstaclesManager/ObstaclesSP" unique_id=802219165 instance=ExtResource("11_jxbvp")]
position = Vector2(128, 384)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint30" parent="ObstaclesManager/ObstaclesSP" unique_id=1832664893 instance=ExtResource("11_jxbvp")]
position = Vector2(384, 128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint32" parent="ObstaclesManager/ObstaclesSP" unique_id=1211077913 instance=ExtResource("11_jxbvp")]
position = Vector2(384, 640)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint33" parent="ObstaclesManager/ObstaclesSP" unique_id=815937354 instance=ExtResource("11_jxbvp")]
position = Vector2(640, -128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint35" parent="ObstaclesManager/ObstaclesSP" unique_id=386637639 instance=ExtResource("11_jxbvp")]
position = Vector2(640, 384)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint38" parent="ObstaclesManager/ObstaclesSP" unique_id=1280267006 instance=ExtResource("11_jxbvp")]
position = Vector2(896, 128)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint40" parent="ObstaclesManager/ObstaclesSP" unique_id=1281868341 instance=ExtResource("11_jxbvp")]
position = Vector2(896, 640)
script = ExtResource("12_venit")

[node name="ObjectSpawnpoint43" parent="ObstaclesManager/ObstaclesSP" unique_id=137586691 instance=ExtResource("11_jxbvp")]
position = Vector2(1152, 384)
script = ExtResource("12_venit")

[connection signal="EndGameSignal" from="." to="GameOverTImer" method="start" unbinds=1]
[connection signal="StartGameSignal" from="." to="AudioStreamPlayer2D" method="LaunchGameMusic"]
[connection signal="StartGameSignal" from="." to="ObstaclesManager" method="GenerateObstacles"]
[connection signal="StartGameSignal" from="." to="UI" method="set_visible" binds= [true]]
[connection signal="StartGameSignal" from="." to="MainTitile" method="set_visible" binds= [false]]
[connection signal="timeout" from="GameOverTImer" to="." method="SetUpGame"]
[connection signal="timeout" from="GameOverTImer" to="AudioStreamPlayer2D" method="LaunchMenuMusic"]
[connection signal="timeout" from="GameOverTImer" to="UI" method="set_visible" binds= [false]]
[connection signal="timeout" from="GameOverTImer" to="LoadingScreen/AnimationPlayer" method="play" binds= ["In"]]
[connection signal="animation_finished" from="LoadingScreen/AnimationPlayer" to="." method="ManageAnimation"]

[editable path="MainTitile/MainTitle"]
[editable path="LoadingScreen"]
